<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="author" content="LyPaw">
  <title>PokÃ©dex â€” PokeRealm</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet"/>
  <style>
    /* â”€â”€ LIGHT THEME (default) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root {
      --bg:         #F0F0F5;
      --surface:    #FFFFFF;
      --card-bg:    #FAFAFA;
      --card-top:   #EFEFEF;
      --border:     #D0D0DC;
      --border-mid: #B8B8CC;
      --text:       #1a1a2e;
      --muted:      #7070A0;
      --topbar-bg:  #CC0000;
      --topbar-txt: #FFFFFF;
      --logo-color: #CC0000;
      --accent:     #CC0000;
      --accent-glow:rgba(204,0,0,0.18);
      --btn-bg:     #EFEFEF;
      --btn-border: #C0C0D0;
      --btn-color:  #7070A0;
      --scan:       rgba(0,0,0,0.02);
      --vignette:   rgba(0,0,0,0.08);
      --header-bg1: #F8F8FF;
      --header-bg2: #F0F0F8;
      --controls-bg:#FAFAFE;
      --stat-track: #E0E0EC;
      --card-num:   #AAAACC;
      --card-gen-c: #CC0000;
      --count-c:    #CC0000;
      --footer-bg:  #F0F0F8;
      --footer-bd:  #D0D0E0;
      --gc-green:   #009933;
      --gc-blue:    #0066CC;
      --gc-teal:    #007799;
      --ataque-bg:  #F0F0FF;
      --ataque-bd:  #C0C0E0;
      --ataque-txt: #5050A0;
    }

    /* â”€â”€ DARK THEME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    [data-theme="dark"] {
      --bg:         #0d0d14;
      --surface:    #111118;
      --card-bg:    #13131e;
      --card-top:   #1a1422;
      --border:     #2a2a3a;
      --border-mid: #3a3a5a;
      --text:       #E8E8F5;
      --muted:      #5a5a7a;
      --topbar-bg:  #880000;
      --topbar-txt: #FFFFFF;
      --logo-color: #FF3333;
      --accent:     #FF3333;
      --accent-glow:rgba(255,51,51,0.2);
      --btn-bg:     #0d0d1a;
      --btn-border: #2a2a4a;
      --btn-color:  #5a5a7a;
      --scan:       rgba(255,255,255,0.025);
      --vignette:   rgba(0,0,0,0.55);
      --header-bg1: #1a1428;
      --header-bg2: #110e1e;
      --controls-bg:#0f0f1c;
      --stat-track: #1a1a2e;
      --card-num:   #3a3a5a;
      --card-gen-c: #FF3333;
      --count-c:    #FF6666;
      --footer-bg:  #0d0d14;
      --footer-bd:  #1e1e2e;
      --gc-green:   #33CC66;
      --gc-blue:    #3399FF;
      --gc-teal:    #00BBBB;
      --ataque-bg:  #0d0d20;
      --ataque-bd:  #2a2a4a;
      --ataque-txt: #7070A0;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { background: #000; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'VT323', monospace;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      transition: background 0.3s, color 0.3s;
    }

    /* CRT scanlines */
    body::before {
      content: '';
      position: fixed; inset: 0; z-index: 999; pointer-events: none;
      background: repeating-linear-gradient(
        0deg,
        transparent, transparent 2px,
        var(--scan) 2px, var(--scan) 4px
      );
    }

    /* Vignette */
    body::after {
      content: '';
      position: fixed; inset: 0; z-index: 998; pointer-events: none;
      background: radial-gradient(ellipse at center, transparent 55%, var(--vignette) 100%);
    }

    /* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    header {
      background: linear-gradient(180deg, var(--header-bg1) 0%, var(--header-bg2) 100%);
      border-bottom: 3px solid var(--accent);
      position: relative; z-index: 1;
      padding: 0;
      transition: background 0.3s, border-color 0.3s;
    }

    .gc-topbar {
      background: var(--topbar-bg);
      padding: 0.25rem 0.8rem;
      display: flex; justify-content: space-between; align-items: center;
      transition: background 0.3s;
    }

    .gc-topbar-text {
      font-family: 'Press Start 2P', monospace;
      font-size: 0.42rem; color: var(--topbar-txt);
      letter-spacing: 0.08em;
    }

    /* Theme toggle button */
    .theme-toggle {
      font-family: 'Press Start 2P', monospace; font-size: 0.38rem;
      background: none; border: 1px solid rgba(255,255,255,0.3);
      color: var(--topbar-txt); padding: 0.2rem 0.5rem;
      cursor: pointer; letter-spacing: 0.05em;
      transition: all 0.2s;
    }
    .theme-toggle:hover { background: rgba(255,255,255,0.15); }

    .gc-header-inner {
      padding: 1.2rem 0.8rem;
      display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;
    }

    .gc-logo {
      font-family: 'Press Start 2P', monospace;
      font-size: clamp(0.9rem, 3vw, 1.4rem);
      color: var(--logo-color);
      text-shadow: 2px 2px 0 rgba(0,0,0,0.15), 0 0 20px var(--accent-glow);
      letter-spacing: 0.08em; line-height: 1.6;
      transition: color 0.3s;
    }

    .gc-logo span {
      display: block; font-size: 0.42rem;
      color: var(--gc-teal);
      letter-spacing: 0.22em; margin-top: 0.2rem;
    }

    .gc-header-right {
      display: flex; flex-direction: column; align-items: flex-end; gap: 0.4rem;
    }

    .gc-count {
      font-family: 'Press Start 2P', monospace; font-size: 0.42rem;
      color: var(--count-c);
    }
    .gc-count em { color: var(--gc-teal); font-style: normal; }

    .gc-dots { display: flex; gap: 0.4rem; }
    .gc-dot {
      width: 10px; height: 10px; border-radius: 50%;
      box-shadow: inset -2px -2px 3px rgba(0,0,0,0.25);
    }

    /* â”€â”€ CONTROLS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .gc-controls {
      background: var(--controls-bg);
      border-bottom: 2px solid var(--border);
      padding: 0.9rem 0.8rem;
      display: flex; flex-wrap: wrap; gap: 0.6rem; align-items: center;
      position: relative; z-index: 1;
      transition: background 0.3s, border-color 0.3s;
    }

    .gc-search {
      display: flex; align-items: center; gap: 0.4rem;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 2px; padding: 0.35rem 0.7rem;
      transition: border-color 0.2s, background 0.3s;
    }
    .gc-search:focus-within { border-color: var(--accent); }
    .gc-search input {
      background: none; border: none; outline: none;
      color: var(--text); font-family: 'VT323', monospace;
      font-size: 1.1rem; width: 160px;
      transition: color 0.3s;
    }
    .gc-search input::placeholder { color: var(--muted); }

    .gc-sep { width: 1px; height: 24px; background: var(--border); }

    .gc-filter-row { display: flex; gap: 0.4rem; flex-wrap: wrap; }

    .gc-btn {
      font-family: 'Press Start 2P', monospace; font-size: 0.5rem;
      padding: 0.45rem 0.8rem;
      background: var(--btn-bg);
      border: 2px solid var(--btn-border);
      color: var(--btn-color);
      cursor: pointer; letter-spacing: 0.05em; border-radius: 2px;
      transition: all 0.15s;
    }
    .gc-btn:hover { border-color: var(--accent); color: var(--accent); }
    .gc-btn.active {
      background: var(--surface);
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 0 0 8px var(--accent-glow);
    }

    /* â”€â”€ GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .gc-grid {
      position: relative; z-index: 1;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
      gap: 1.2rem;
      padding: 1.2rem 0.8rem 3rem;
      max-width: 100%;
    }

    /* â”€â”€ CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .gc-card {
      background: var(--card-bg);
      border: 2px solid var(--border);
      border-radius: 2px; overflow: hidden;
      cursor: pointer; position: relative;
      transition: transform 0.15s, border-color 0.15s, box-shadow 0.15s, background 0.3s;
      animation: gcIn 0.3s ease both;
    }
    .gc-card:hover {
      transform: translateY(-4px);
      border-color: var(--accent);
      box-shadow: 0 8px 24px rgba(0,0,0,0.15), 0 0 12px var(--accent-glow);
    }
    .gc-card.playing {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px var(--accent), 0 0 20px var(--accent-glow);
      animation: gcIn 0.3s ease both, gcPulse 0.8s ease infinite alternate;
    }

    @keyframes gcIn {
      from { opacity: 0; transform: translateY(12px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes gcPulse {
      from { box-shadow: 0 0 0 1px var(--accent), 0 0 10px var(--accent-glow); }
      to   { box-shadow: 0 0 0 2px var(--accent), 0 0 25px var(--accent-glow); }
    }

    .gc-card-bar {
      background: var(--card-top);
      border-bottom: 1px solid var(--border);
      padding: 0.45rem 0.8rem;
      display: flex; justify-content: space-between; align-items: center;
      transition: background 0.3s;
    }
    .gc-card-num {
      font-family: 'Press Start 2P', monospace; font-size: 0.55rem;
      color: var(--card-num);
    }
    .gc-card-gen {
      font-family: 'Press Start 2P', monospace; font-size: 0.5rem;
      color: var(--card-gen-c);
    }

    .gc-card-img {
      background: radial-gradient(circle at center, var(--accent-glow) 0%, transparent 65%);
      display: flex; justify-content: center; align-items: center;
      padding: 1rem 0.5rem 0.6rem; min-height: 140px;
      position: relative;
    }
    .gc-card-img img {
      width: 110px; height: 110px;
      image-rendering: pixelated; image-rendering: crisp-edges;
      filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
      transition: transform 0.2s;
    }
    .gc-card:hover .gc-card-img img { transform: scale(1.12); }

    .gc-sound {
      position: absolute; bottom: 4px; right: 6px;
      font-size: 0.65rem; opacity: 0; transition: opacity 0.2s;
    }
    .gc-card:hover .gc-sound { opacity: 0.4; }
    .gc-card.playing .gc-sound { opacity: 1; }

    .gc-card-body { padding: 0.8rem 0.9rem 1rem; }

    .gc-card-name {
      font-family: 'Press Start 2P', monospace; font-size: 0.65rem;
      color: var(--text); margin-bottom: 0.6rem; line-height: 1.7;
      transition: color 0.3s;
    }

    .gc-tipos { display: flex; gap: 0.3rem; flex-wrap: wrap; margin-bottom: 0.6rem; }
    .gc-tipo {
      font-family: 'Press Start 2P', monospace; font-size: 0.42rem;
      padding: 0.25rem 0.55rem; color: #fff; font-weight: 700; border-radius: 1px;
    }

    .gc-stat { margin-bottom: 0.4rem; }
    .gc-stat-row { display: flex; justify-content: space-between; margin-bottom: 0.2rem; }
    .gc-stat-lbl {
      font-family: 'Press Start 2P', monospace; font-size: 0.45rem; color: var(--muted);
    }
    .gc-stat-num {
      font-family: 'Press Start 2P', monospace; font-size: 0.48rem; color: var(--gc-green);
    }
    .gc-bar { height: 5px; background: var(--stat-track); border: 1px solid var(--border); }
    .gc-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--gc-teal));
    }

    .gc-ataques {
      margin-top: 0.6rem; padding-top: 0.5rem;
      border-top: 1px solid var(--border);
      display: flex; flex-wrap: wrap; gap: 0.3rem;
    }
    .gc-ataque {
      font-size: 1rem; color: var(--ataque-txt);
      background: var(--ataque-bg); border: 1px solid var(--ataque-bd);
      padding: 0.1rem 0.45rem; transition: background 0.3s;
    }

    /* â”€â”€ FIX: regiÃ³n en pie de card, sin solaparse con GEN â”€â”€ */
    .gc-region {
      display: block;
      text-align: right;
      font-family: 'Press Start 2P', monospace; font-size: 0.42rem;
      color: var(--muted);
      padding: 0.3rem 0.6rem 0.3rem;
      border-top: 1px solid var(--border);
      background: var(--card-top);
      letter-spacing: 0.05em;
      transition: background 0.3s;
    }

    /* â”€â”€ EMPTY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .gc-empty {
      grid-column: 1/-1; text-align: center;
      padding: 4rem; color: var(--muted);
      font-family: 'Press Start 2P', monospace;
      font-size: 0.6rem; line-height: 2.5;
    }

    /* â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    footer {
      position: relative; z-index: 1;
      background: var(--footer-bg);
      border-top: 2px solid var(--footer-bd);
      padding: 1rem 0.8rem;
      display: flex; flex-wrap: wrap; gap: 0.8rem;
      justify-content: space-between; align-items: center;
      transition: background 0.3s;
    }
    .gc-footer-left { font-size: 0.95rem; color: var(--muted); }
    .gc-footer-left a { color: var(--muted); text-decoration: none; }
    .gc-footer-left a:hover { color: var(--accent); }

    .gc-footer-team { display: flex; gap: 0.5rem; flex-wrap: wrap; }
    .gc-footer-team a {
      font-family: 'Press Start 2P', monospace; font-size: 0.35rem;
      color: var(--muted); text-decoration: none;
      border: 1px solid var(--border); padding: 0.25rem 0.5rem;
      transition: all 0.15s;
    }
    .gc-footer-team a:hover { border-color: var(--accent); color: var(--accent); }

    @media (max-width: 600px) {
      .gc-grid { padding: 0.8rem; gap: 0.8rem; }
      .gc-controls { padding: 0.8rem; }
      .gc-topbar { flex-wrap: wrap; gap: 0.3rem; }
    }

    /* â”€â”€ MODAL OVERLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .modal-overlay {
      position: fixed; inset: 0; z-index: 1000;
      background: rgba(0,0,0,0.75);
      display: flex; justify-content: center; align-items: center;
      padding: 1rem;
      opacity: 0; pointer-events: none;
      transition: opacity 0.2s;
    }
    .modal-overlay.open { opacity: 1; pointer-events: all; }

    .modal {
      background: var(--surface);
      border: 2px solid var(--accent);
      border-radius: 4px;
      width: 100%; max-width: 520px;
      max-height: 90vh; overflow-y: auto;
      position: relative;
      transform: translateY(20px) scale(0.97);
      transition: transform 0.2s;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 30px var(--accent-glow);
    }
    .modal-overlay.open .modal { transform: translateY(0) scale(1); }

    .modal-bar {
      background: var(--topbar-bg);
      padding: 0.5rem 0.8rem;
      display: flex; justify-content: space-between; align-items: center;
    }
    .modal-bar-title {
      font-family: 'Press Start 2P', monospace; font-size: 0.45rem;
      color: #fff; letter-spacing: 0.08em;
    }
    .modal-close {
      font-family: 'Press Start 2P', monospace; font-size: 0.5rem;
      background: none; border: 1px solid rgba(255,255,255,0.4);
      color: #fff; padding: 0.2rem 0.5rem; cursor: pointer;
      transition: background 0.15s;
    }
    .modal-close:hover { background: rgba(255,255,255,0.2); }

    .modal-body {
      display: grid; grid-template-columns: 140px 1fr;
      gap: 1.2rem; padding: 1.2rem;
    }

    /* izquierda: sprite grande */
    .modal-left { display: flex; flex-direction: column; align-items: center; gap: 0.8rem; }

    .modal-sprite {
      width: 128px; height: 128px;
      image-rendering: pixelated; image-rendering: crisp-edges;
      filter: drop-shadow(0 4px 16px rgba(0,0,0,0.3));
    }

    .modal-num {
      font-family: 'Press Start 2P', monospace; font-size: 0.45rem;
      color: var(--muted);
    }

    .modal-tipos { display: flex; flex-wrap: wrap; gap: 0.3rem; justify-content: center; }
    .modal-tipo {
      font-family: 'Press Start 2P', monospace; font-size: 0.32rem;
      padding: 0.2rem 0.45rem; color: #fff; border-radius: 1px;
    }

    .modal-region-gen {
      font-family: 'Press Start 2P', monospace; font-size: 0.35rem;
      color: var(--muted); text-align: center; line-height: 1.8;
    }
    .modal-region-gen span { color: var(--accent); }

    /* derecha: datos */
    .modal-right { display: flex; flex-direction: column; gap: 0.8rem; }

    .modal-name {
      font-family: 'Press Start 2P', monospace; font-size: 0.75rem;
      color: var(--text); line-height: 1.6;
    }

    .modal-section-title {
      font-family: 'Press Start 2P', monospace; font-size: 0.38rem;
      color: var(--accent); letter-spacing: 0.1em;
      border-bottom: 1px solid var(--border); padding-bottom: 0.2rem;
      margin-bottom: 0.4rem;
    }

    .modal-stat { margin-bottom: 0.4rem; }
    .modal-stat-row { display: flex; justify-content: space-between; margin-bottom: 0.2rem; }
    .modal-stat-lbl { font-family: 'Press Start 2P', monospace; font-size: 0.35rem; color: var(--muted); }
    .modal-stat-num { font-family: 'Press Start 2P', monospace; font-size: 0.4rem; color: var(--gc-green); }
    .modal-bar { height: 5px; background: var(--stat-track); border: 1px solid var(--border); }
    .modal-bar-fill { height: 100%; background: linear-gradient(90deg, var(--accent), var(--gc-teal)); }

    .modal-ataques { display: flex; flex-wrap: wrap; gap: 0.3rem; }
    .modal-ataque {
      font-size: 0.85rem; color: var(--ataque-txt);
      background: var(--ataque-bg); border: 1px solid var(--ataque-bd);
      padding: 0.1rem 0.4rem;
    }

    /* Datos curiosos */
    .modal-notas-wrap { padding: 0 1.2rem 1.2rem; }

    .modal-notas-label {
      font-family: 'Press Start 2P', monospace; font-size: 0.38rem;
      color: var(--accent); letter-spacing: 0.1em;
      border-bottom: 1px solid var(--border); padding-bottom: 0.2rem;
      margin-bottom: 0.5rem;
    }

    .modal-notas {
      width: 100%; min-height: 80px;
      background: var(--card-bg); border: 2px solid var(--border);
      color: var(--text); font-family: 'VT323', monospace; font-size: 1.1rem;
      padding: 0.5rem 0.7rem; resize: vertical;
      transition: border-color 0.2s, background 0.3s;
      line-height: 1.4;
    }
    .modal-notas:focus { outline: none; border-color: var(--accent); }
    .modal-notas::placeholder { color: var(--muted); }

    .modal-notas-actions {
      display: flex; justify-content: space-between; align-items: center;
      margin-top: 0.5rem;
    }
    .modal-saved {
      font-family: 'Press Start 2P', monospace; font-size: 0.35rem;
      color: var(--gc-green); opacity: 0; transition: opacity 0.3s;
    }
    .modal-saved.show { opacity: 1; }

    .modal-save-btn {
      font-family: 'Press Start 2P', monospace; font-size: 0.38rem;
      background: var(--accent); border: none; color: #fff;
      padding: 0.35rem 0.8rem; cursor: pointer; letter-spacing: 0.05em;
      transition: opacity 0.15s;
    }
    .modal-save-btn:hover { opacity: 0.85; }

    @media (max-width: 500px) {
      .modal-body { grid-template-columns: 1fr; }
      .modal-left { flex-direction: row; flex-wrap: wrap; justify-content: center; }
    }
  </style>
</head>
<body>

<header>
  <div class="gc-topbar">
    <span class="gc-topbar-text">POKÃ‰DEX v1.0 â€” INSERT CARTRIDGE</span>
    <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">â— TEMA</button>
  </div>
  <div class="gc-header-inner">
    <div>
      <div class="gc-logo">
        POKÃ‰DEX | PokeRealm
        <span>SELECCIONA TU INICIAL</span>
      </div>
    </div>
    <div class="gc-header-right">
      <div class="gc-count">MOSTRANDO <em id="count">0</em> POKÃ‰MON</div>
      <div class="gc-dots">
        <div class="gc-dot" style="background:#CC0000"></div>
        <div class="gc-dot" style="background:#FFE000"></div>
        <div class="gc-dot" style="background:#33CC66"></div>
        <div class="gc-dot" style="background:#3399FF"></div>
      </div>
    </div>
  </div>
</header>

<div class="gc-controls">
  <div class="gc-search">
    <span>ğŸ”</span>
    <input type="text" id="search" placeholder="BUSCAR..."/>
  </div>
  <div class="gc-sep"></div>
  <div class="gc-filter-row">
    <button class="gc-btn active" data-filter="todos">TODOS</button>
    <button class="gc-btn" data-filter="1">GEN I</button>
    <button class="gc-btn" data-filter="3">GEN III</button>
    <button class="gc-btn" data-filter="5">GEN V</button>
  </div>
  <div class="gc-sep"></div>
  <div class="gc-filter-row">
    <button class="gc-btn" data-filter="fuego">ğŸ”¥</button>
    <button class="gc-btn" data-filter="agua">ğŸ’§</button>
    <button class="gc-btn" data-filter="planta">ğŸŒ¿</button>
  </div>
</div>

<div class="gc-grid" id="grid"></div>

<div class="modal-overlay" id="modalOverlay" onclick="closeModalOutside(event)">
  <div class="modal" id="modal">
    <div class="modal-bar">
      <span class="modal-bar-title" id="modalBarTitle">POKÃ‰DEX</span>
      <button class="modal-close" onclick="closeModal()">âœ• CERRAR</button>
    </div>
    <div class="modal-body">
      <div class="modal-left">
        <img class="modal-sprite" id="modalSprite" src="" alt=""/>
        <div class="modal-num" id="modalNum"></div>
        <div class="modal-tipos" id="modalTipos"></div>
        <div class="modal-region-gen" id="modalRegionGen"></div>
      </div>
      <div class="modal-right">
        <div class="modal-name" id="modalName"></div>
        <div>
          <div class="modal-section-title">STATS</div>
          <div class="modal-stat">
            <div class="modal-stat-row">
              <span class="modal-stat-lbl">PS</span>
              <span class="modal-stat-num" id="modalPs"></span>
            </div>
            <div class="modal-bar"><div class="modal-bar-fill" id="modalPsBar"></div></div>
          </div>
          <div class="modal-stat">
            <div class="modal-stat-row">
              <span class="modal-stat-lbl">NIVEL</span>
              <span class="modal-stat-num" id="modalNivel"></span>
            </div>
            <div class="modal-bar"><div class="modal-bar-fill" id="modalNivelBar"></div></div>
          </div>
        </div>
        <div>
          <div class="modal-section-title">ATAQUES</div>
          <div class="modal-ataques" id="modalAtaques"></div>
        </div>
      </div>
    </div>
    <div class="modal-notas-wrap">
      <div class="modal-notas-label">ğŸ“ DATOS CURIOSOS</div>
      <textarea class="modal-notas" id="modalNotas" placeholder="Escribe aquÃ­ datos curiosos, estrategias, notas..."></textarea>
      <div class="modal-notas-actions">
        <span class="modal-saved" id="modalSaved">âœ” GUARDADO</span>
        <button class="modal-save-btn" onclick="saveNotas()">GUARDAR</button>
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="gc-footer-left">
    SPRITES: <a href="https://pokeapi.co" target="_blank">POKEAPI.CO</a>
    &nbsp;Â·&nbsp; PokeRealm Â© 2026
  </div>
  <div class="gc-footer-team">
    <a href="https://github.com/LyPaw" target="_blank">LyPaw</a>
    <a href="https://github.com/CodeDiegoF" target="_blank">CodeDiegoF</a>
    <a href="https://github.com/EvoXgamer-14" target="_blank">EvoXgamer</a>
    <a href="https://github.com/FranJFM" target="_blank">FranJFM</a>
  </div>
</footer>

<script>
  // â”€â”€ Theme toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function toggleTheme() {
    const html = document.documentElement;
    const isDark = html.getAttribute('data-theme') === 'dark';
    html.setAttribute('data-theme', isDark ? 'light' : 'dark');
    document.getElementById('themeToggle').textContent = isDark ? 'â— TEMA' : 'â—‘ TEMA';
    localStorage.setItem('pk-theme', isDark ? 'light' : 'dark');
  }

  const saved = localStorage.getItem('pk-theme');
  if (saved) {
    document.documentElement.setAttribute('data-theme', saved);
    if (saved === 'dark') document.getElementById('themeToggle').textContent = 'â—‘ TEMA';
  }

  const SPRITE_URL = id =>
    `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${id}.png`;
  const CRY_URL = id =>
    `https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/${id}.ogg`;

  let currentAudio = null;

  function playSound(id, cardEl) {
    if (currentAudio) {
      currentAudio.pause();
      currentAudio.currentTime = 0;
      document.querySelectorAll('.gc-card.playing').forEach(c => c.classList.remove('playing'));
    }
    const audio = new Audio(CRY_URL(id));
    currentAudio = audio;
    cardEl.classList.add('playing');
    audio.play().catch(() => {});
    audio.onended = () => cardEl.classList.remove('playing');
  }

  const TIPO_COLORS = {
    fuego:'#e05010', agua:'#2288CC', planta:'#338833', veneno:'#8844AA',
    normal:'#888860', electrico:'#BB9900', tierra:'#AA7740', roca:'#887720',
    bicho:'#667700', fantasma:'#553377', acero:'#7788AA', hielo:'#5599AA',
    lucha:'#993322', psiquico:'#CC3366', dragon:'#5522CC', siniestro:'#554433', hada:'#BB5577',
  };

  let allPokemons = [];
  let currentFilter = 'todos';
  let currentSearch = '';

  async function loadPokemons() {
    try {
      const res = await fetch('pokemons.json');
      allPokemons = await res.json();
      render();
    } catch (e) {
      document.getElementById('grid').innerHTML =
        '<div class="gc-empty">ERROR: NO SE PUDO CARGAR<br>pokemons.json</div>';
    }
  }

  function render() {
    const grid = document.getElementById('grid');
    const q    = currentSearch.toLowerCase();

    const filtered = allPokemons.filter(p => {
      const matchSearch = p.nombre.toLowerCase().includes(q);
      const matchFilter =
        currentFilter === 'todos' ? true :
        ['1','3','5'].includes(currentFilter) ? p.generacion === +currentFilter :
        p.tipo.includes(currentFilter);
      return matchSearch && matchFilter;
    });

    document.getElementById('count').textContent = filtered.length;

    if (!filtered.length) {
      grid.innerHTML = '<div class="gc-empty">NO SE ENCONTRARON POKÃ‰MON</div>';
      return;
    }

    grid.innerHTML = filtered.map((p, i) => {
      const tiposBadges = p.tipo.map(t =>
        `<span class="gc-tipo" style="background:${TIPO_COLORS[t] || '#888'}">${t.toUpperCase()}</span>`
      ).join('');

      const ataquesTags = (p.ataques || []).map(a =>
        `<span class="gc-ataque">${a}</span>`
      ).join('');

      return `
        <div class="gc-card" style="animation-delay:${i * 0.04}s" onclick="openModal(${p.id})">
          <div class="gc-card-bar">
            <span class="gc-card-num">NO.${String(p.id).padStart(3,'0')}</span>
            <span class="gc-card-gen">GEN ${p.generacion}</span>
          </div>
          <div class="gc-card-img">
            <img src="${SPRITE_URL(p.id)}" alt="${p.nombre}"
                 onerror="this.src='https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png'"/>
            <div class="gc-sound">ğŸ”Š</div>
          </div>
          <div class="gc-card-body">
            <div class="gc-card-name">${p.nombre}</div>
            <div class="gc-tipos">${tiposBadges}</div>
            <div class="gc-stat">
              <div class="gc-stat-row">
                <span class="gc-stat-lbl">PS</span>
                <span class="gc-stat-num">${p.ps}</span>
              </div>
              <div class="gc-bar"><div class="gc-bar-fill" style="width:${Math.min(p.ps,100)}%"></div></div>
            </div>
            <div class="gc-stat">
              <div class="gc-stat-row">
                <span class="gc-stat-lbl">NIV</span>
                <span class="gc-stat-num">${p.nivel}</span>
              </div>
              <div class="gc-bar"><div class="gc-bar-fill" style="width:${Math.min(p.nivel,100)}%"></div></div>
            </div>
            <div class="gc-ataques">${ataquesTags}</div>
          </div>
          <div class="gc-region">${p.region || ''}</div>
        </div>`;
    }).join('');
  }

  document.querySelectorAll('.gc-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.gc-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentFilter = btn.dataset.filter;
      render();
    });
  });

  document.getElementById('search').addEventListener('input', e => {
    currentSearch = e.target.value;
    render();
  });

  // â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let currentModalId = null;

  function openModal(id) {
    const p = allPokemons.find(x => x.id === id);
    if (!p) return;
    currentModalId = id;

    // Sonido
    if (currentAudio) { currentAudio.pause(); currentAudio.currentTime = 0; }
    const audio = new Audio(CRY_URL(id));
    currentAudio = audio;
    audio.play().catch(() => {});

    // Rellenar modal
    document.getElementById('modalBarTitle').textContent = `NO.${String(p.id).padStart(3,'0')} â€” ${p.nombre.toUpperCase()}`;
    document.getElementById('modalSprite').src = SPRITE_URL(p.id);
    document.getElementById('modalSprite').alt = p.nombre;
    document.getElementById('modalNum').textContent = `NO.${String(p.id).padStart(3,'0')}`;
    document.getElementById('modalName').textContent = p.nombre;
    document.getElementById('modalPs').textContent = p.ps;
    document.getElementById('modalPsBar').style.width = Math.min(p.ps, 100) + '%';
    document.getElementById('modalNivel').textContent = p.nivel;
    document.getElementById('modalNivelBar').style.width = Math.min(p.nivel, 100) + '%';
    document.getElementById('modalRegionGen').innerHTML =
      `${p.region || ''}<br><span>GEN ${p.generacion}</span>`;

    // Tipos
    document.getElementById('modalTipos').innerHTML = p.tipo.map(t =>
      `<span class="modal-tipo" style="background:${TIPO_COLORS[t] || '#888'}">${t.toUpperCase()}</span>`
    ).join('');

    // Ataques
    document.getElementById('modalAtaques').innerHTML = (p.ataques || []).map(a =>
      `<span class="modal-ataque">${a}</span>`
    ).join('');

    // Notas guardadas en localStorage
    const savedNota = localStorage.getItem(`pk-nota-${id}`) || '';
    document.getElementById('modalNotas').value = savedNota;
    document.getElementById('modalSaved').classList.remove('show');

    // Abrir
    document.getElementById('modalOverlay').classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    document.getElementById('modalOverlay').classList.remove('open');
    document.body.style.overflow = '';
    currentModalId = null;
  }

  function closeModalOutside(e) {
    if (e.target === document.getElementById('modalOverlay')) closeModal();
  }

  function saveNotas() {
    if (currentModalId === null) return;
    const text = document.getElementById('modalNotas').value;
    localStorage.setItem(`pk-nota-${currentModalId}`, text);
    const saved = document.getElementById('modalSaved');
    saved.classList.add('show');
    setTimeout(() => saved.classList.remove('show'), 2000);
  }

  // Cerrar con Escape
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') closeModal();
  });

  loadPokemons();
</script>
</body>
</html>
